# Docker Upstart and SysVinit configuration file

# Customize location of Docker binary (especially for development testing).
DOCKER="<%= node['docker']['install_dir'] %>/docker"

<% if node['docker']['logfile'] -%>
DOCKER_LOGFILE=<%= node['docker']['logfile'] %>
<% end -%>

# Use DOCKER_OPTS to modify the daemon startup options.
<% if node['docker']['bind_socket'] -%>
DOCKER_OPTS="$DOCKER_OPTS -H <%= node['docker']['bind_socket'] %>"
<% end -%>
<% if node['docker']['bind_uri'] -%>
DOCKER_OPTS="$DOCKER_OPTS -H <%= node['docker']['bind_uri'] %>"
<% end -%>
<% if node['docker']['container_init_type'] -%>
DOCKER_OPTS="$DOCKER_OPTS -r=false"
<% end -%>
<% if node['docker']['options'] -%>
DOCKER_OPTS="$DOCKER_OPTS <%= node['docker']['options'] %>"
<% end -%>
<% if node['docker']['storage_driver'] -%>
DOCKER_OPTS="$DOCKER_OPTS -s <%= node['docker']['storage_driver'] %>"
<% end -%>
<% if node['docker']['exec_driver'] -%>
DOCKER_OPTS="$DOCKER_OPTS -e <%= node['docker']['exec_driver'] %>"
<% end -%>
<% if node['docker']['group'] -%>
DOCKER_OPTS="$DOCKER_OPTS -G <%= node['docker']['group'] %>"
<% end -%>

<% if node['docker']['pidfile'] -%>
DOCKER_PIDFILE=<%= node['docker']['pidfile'] %>
<% end -%>

<% if node['docker']['ramdisk'] -%>
DOCKER_RAMDISK=<%= node['docker']['ramdisk'] %>
<% end -%>

# If you need Docker to use an HTTP proxy, it can also be specified here.
<% if node['docker']['http_proxy'] -%>
export HTTP_PROXY=<%= node['docker']['http_proxy'] %>
<% end -%>

# This is also a handy place to tweak where Docker's temporary files go.
<% if node['docker']['tmpdir'] -%>
export TMPDIR="<%= node['docker']['tmpdir'] %>"
<% end -%>
